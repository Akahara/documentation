<!DOCTYPE html>
<link href="index.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
<h1 id="développement-web">Développement web</h1>
<h2 id="intro">Intro</h2>
<p>Avec ce "cours" je compte vous apprendre à vous servir d'html, css, php et javascript (js) pour construire un site web complet. Je n'ai pas besoin de vous expliquer à quel point le web est important... duh. Et savoir faire ça est très pratique, surtout pour la création d'interfaces - vous pouvez toujours utiliser d'autres langages style Java, c++ etc pour créer des interfaces mais le web est <em>fait pour</em> ; même dans vos autres projets passer par html/css est souvent très pratique.</p>
<h2 id="table-des-matières">Table des matières</h2>
<p>Certains blocks ont été masqués.</p>
<ol>
<li><a href="#comment-%C3%A7a-marche-le-web-">Comment ça marche le web ?</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#html">HTML</a>
<ol>
<li><a href="#les-balises-utiles">Les balises utiles</a></li>
<li><a href="#w3c">W3C</a></li>
</ol>
</li>
<li><a href="#css">css</a>
<ol>
<li><a href="#s%C3%A9lecteurs">Sélecteurs</a></li>
<li><a href="#les-devtools">Les devtools</a></li>
<li><a href="#positionnement">Positionnement</a></li>
<li><a href="#styles">Styles</a></li>
</ol>
</li>
<li><a href="#requ%C3%AAtes">Requêtes</a></li>
<li><a href="#php">php</a>
<ol>
<li><a href="#syntaxe-de-base">Syntaxe de base</a></li>
<li><a href="#int%C3%A9gration-en-html">Intégration en html</a></li>
<li><a href="#pdo">PDO</a></li>
</ol>
</li>
<li><a href="#le-mvc">Le MVC</a></li>
<li><a href="#js">JS</a>
<ol>
<li><a href="#syntaxe">Syntaxe</a></li>
<li><a href="#interaction-avec-le-dom">Interaction avec le DOM</a></li>
<li><a href="#les-requ%C3%AAtes-en-js">Les requêtes en JS</a></li>
<li><a href="#les-twists-de-javascript">Les twists de javascript</a></li>
</ol>
</li>
<li><a href="#notes-additionnelles">Notes additionnelles</a></li>
</ol>
<hr>
<h3 id="comment-ça-marche-le-web-">Comment ça marche, le web ?</h3>
<p>A première vue il faut déjà différencier le client (le navigateur web) et le serveur (le site web). Le client va sur le site, demande une page web et tout ce qui va avec et le serveur lui donne.</p>
<p>Pour faire nos pages on va utiliser HTML et CSS, retenez que ces langages ne sont utile <em>que côté client</em>.
Pour faire un serveur, on utilisera <em>apache2</em> ou <em>nodeJS</em>, on verra plus tard comment ils fonctionnent. Pour l'instant on n'utilisera pas du tout de serveur, un navigateur normal est capable d'ouvrir une "page web" depuis un fichier html. ^287bdd</p>
<table>
<thead>
<tr>
<th>Langage</th>
<th>Utilisation</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTML</td>
<td>Côté client uniquement, défini le contenu d'une page web</td>
</tr>
<tr>
<td>CSS</td>
<td>Côté client uniquement, met en forme la page</td>
</tr>
<tr>
<td>JS - côté client</td>
<td>Rend une page web interactive (click sur un bouton...)</td>
</tr>
<tr>
<td>JS - côté serveur</td>
<td>Permet de faire un serveur web avec nodeJS</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="installation">Installation</h2>
<p>Pour programmer en web il va vous falloir :</p>
<ul>
<li><strong>Un IDE</strong>
J'utilise Visual Studio Code (VSCode) comme IDE, il connaît par défaut html, css, js et php. Ne confondez pas Visual Studio et Visual Studio Code !</li>
<li><strong>Un navigateur web</strong>
Celui de votre ordi fera très bien l'affaire, personnellement j'utilise firefox.</li>
<li><strong>Un serveur web</strong>
Ce n'est pas nécessaire tout de suite, si vous voulez vous avancer vous pouvez installer <a href="https://www.wampserver.com/en/">wamp</a> (windows), <a href="https://doc.ubuntu-fr.org/lamp">lamp</a> (linux), <a href="https://www.apachefriends.org/fr/index.html">xampp</a> (macos) ou <a href="https://nodejs.dev/">nodeJS</a> (tout os). Les trois premiers sont des ensembles apache2-mysql-php.</li>
</ul>
<blockquote>
<p>Il va vous falloir un dossier dans lequel vous mettrez tous vos fichiers, ouvrez le avec VSCode, assurez vous qu'il soit vide pour l'instant.</p>
</blockquote>
<hr>
<h2 id="html">HTML</h2>
<p>HTML est un langage de description de contenu, il dit <em>ce qu'il y a</em> dans une page web.</p>
<p>Pour commencer, créez un fichier <code>index.html</code>. Vous pouvez le remplir avec ce code :</p>
<pre><code class="hljs language-html"><span class="hljs-meta">&#x3C;!DOCTYPE <span class="hljs-keyword">html</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">head</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">title</span>></span>Document<span class="hljs-tag">&#x3C;/<span class="hljs-name">title</span>></span>
<span class="hljs-tag">&#x3C;/<span class="hljs-name">head</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">body</span>></span>

<span class="hljs-tag">&#x3C;/<span class="hljs-name">body</span>></span>
<span class="hljs-tag">&#x3C;/<span class="hljs-name">html</span>></span>
</code></pre>
<p>La première ligne sert juste à dire que c'est bien un fichier html.
Le reste du fichier va se composer en <em>balises html</em>, par exemple la balise <code>&#x3C;html></code> est la première et contient tout le reste du document.</p>
<blockquote>
<p><em>Le document</em> est un synonyme pour <em>la page</em>.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Balise</th>
<th>Utilisation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&#x3C;html></code></td>
<td>Contient tout le document</td>
</tr>
<tr>
<td><code>&#x3C;head></code></td>
<td>Contient des déclarations méta, elle ne s'affiche pas sur la page</td>
</tr>
<tr>
<td><code>&#x3C;title></code></td>
<td>Permet de donner un titre à la page - le titre de l'onglet</td>
</tr>
<tr>
<td><code>&#x3C;body></code></td>
<td>Le corps du document, c'est ici qu'on mettra à peu près tout</td>
</tr>
</tbody>
</table>
<p>Si vous ouvrez le fichier maintenant avec votre navigateur vous devriez avoir une page blanche qui s'appelle "Document".</p>
<blockquote>
<p><strong>Note</strong></p>
<p>La quasi-totalité des balises s'ouvrent avec <code>&#x3C;...></code> et se ferment avec <code>&#x3C;/...></code>, certaines ne peuvent pas avoir de contenu, dans ce cas elles n'ont pas besoin de se fermer, on les écrira plutôt comme <code>&#x3C;.../></code>, par exemple <code>&#x3C;img/></code>.</p>
<blockquote>
<p>Techniquement le / n'est pas nécessaire, il est possible que j'en oublie certains, vous n'êtes pas obligés non plus de le mettre si vous savez quelles balises possèdent un contenu ou pas.
On peut rajouter des paramètres à certaines balises, par exemple <code>lang="en"</code> dans la balise <code>html</code>, les paramètres dépendent de la balise.</p>
</blockquote>
</blockquote>
<h3 id="les-balises-utiles">Les balises utiles</h3>
<table>
<thead>
<tr>
<th>Balise</th>
<th>Utilisation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&#x3C;div></code></td>
<td>La balise la plus utilisée, pour organiser le document</td>
</tr>
<tr>
<td><code>&#x3C;span></code></td>
<td>Souvent utilisée pour mettre du texte</td>
</tr>
<tr>
<td><code>&#x3C;ul></code> <code>&#x3C;ol></code></td>
<td>Liste ordonnée et non-ordonnée</td>
</tr>
<tr>
<td><code>&#x3C;pre></code></td>
<td>Contient du texte formaté</td>
</tr>
<tr>
<td><code>&#x3C;p></code></td>
<td>Paragraphe</td>
</tr>
<tr>
<td><code>&#x3C;br/></code></td>
<td>Retour à la ligne forcé</td>
</tr>
<tr>
<td><code>&#x3C;hr/></code></td>
<td>Division horizontale</td>
</tr>
<tr>
<td><code>&#x3C;a></code></td>
<td>Lien (vers un fichier/site/page...)</td>
</tr>
<tr>
<td><code>&#x3C;h1></code>, <code>&#x3C;h2></code>...</td>
<td>Titre</td>
</tr>
<tr>
<td><code>&#x3C;img/></code></td>
<td>Image</td>
</tr>
<tr>
<td><code>&#x3C;table></code></td>
<td>Tableau</td>
</tr>
<tr>
<td><code>&#x3C;form></code></td>
<td>Formulaire</td>
</tr>
<tr>
<td><code>&#x3C;input/></code></td>
<td>Champ d'entrée utilisateur (texte, date...)</td>
</tr>
<tr>
<td><code>&#x3C;script></code></td>
<td>Contient du code JS</td>
</tr>
</tbody>
</table>
<p>Vous pouvez en retrouver plus dans la <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">doc mdn</a>.</p>
<blockquote>
<p><strong>Note</strong> <strong>Quoi utiliser et quand</strong></p>
<p>Pour choisir quelle balise utiliser il faut penser au rôle de ce que vous voulez ajouter, et pas du tout au visuel. Typiquement, si vous voulez une liste horizontale d'images vous utiliserez plutôt <code>&#x3C;ul></code>, même si la liste va s'afficher verticalement sans css.</p>
<p>Pour organiser le document le plus souvent on utilise les <code>&#x3C;div></code>, il peut y en avoir plusieurs dizaines/centaines très rapidement.
La différence principale entre <code>&#x3C;span></code> et <code>&#x3C;div></code> est que le <code>&#x3C;span></code> ne fait pas un retour à la ligne automatiquement.</p>
</blockquote>
<h3 id="w3c">W3C</h3>
<p>Le W3C propose des outils très pratiques de validation html notamment. Une fois que vous avez fini votre page vous pouvez la donner au <a href="https://validator.w3.org/">W3C validator</a> pour vérifier que tout est bien écrit.</p>
<blockquote>
<p><strong>Note</strong> <strong>Ce que fait le W3C validator</strong></p>
<p>Le w3c validator vous montrera les balises qui sont mal écrites mais aussi les attributs qui pourraient manquer.</p>
<p>C'est important de faire valider votre html <em>avant</em> d'ajouter js/php car le validator ne supporte pas ces langages, et les contenus dynamiques générés sur la page ne pourront pas être vérifiés.</p>
</blockquote>
<hr>
<h2 id="css">css</h2>
<p>Le css permet de donner le style de votre page, les deux parties clés du css sont le positionnement et le reste (couleur, polices, effets...). Pour rajouter une feuille de style à votre page il vous faut créer un fichier .css et le lier à votre html via une balise</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&#x3C;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>/></span>
</code></pre>
<p>dans votre balise <code>&#x3C;head></code>.</p>
<p>Une deuxième possibilité est d'ajouter votre css directement dans une balise <code>&#x3C;style>...&#x3C;/style></code>, c'est bien pour tester des choses mais utilisez plutôt plusieurs fichiers.</p>
<p>Les propriétés css s'appliquent à un ou plusieurs objets via des <em>sélecteurs</em>. Par défaut le nom d'une balise est un sélecteur qui s'applique à toutes les balises de ce type, par exemple:</p>
<pre><code class="hljs language-css"><span class="hljs-comment">/* Tous les &#x3C;span> auront un arrière-plan rouge */</span>
<span class="hljs-selector-tag">span</span> {
    <span class="hljs-attribute">background-color</span>: red;
}
</code></pre>
<p>Après avoir spécifié le sélecteur on rajoute les propriétés css qui s'appliquent aux éléments correspondants (<code>background-color</code> dans mon exemple).</p>
<h3 id="sélecteurs">Sélecteurs</h3>
<p>Avant de pouvoir écrire votre css il faut bien comprendre les sélecteurs.</p>
<h4 id="sélecteurs-de-base">Sélecteurs de base</h4>
<pre><code class="hljs language-css"><span class="hljs-comment">/* Toutes les balises &#x3C;span> */</span>
<span class="hljs-selector-tag">span</span> {}
<span class="hljs-comment">/* Tous les éléments de classe "someclass" */</span>
<span class="hljs-selector-class">.someclass</span> {}
<span class="hljs-comment">/* L'élément d'id "someid" */</span>
<span class="hljs-selector-id">#someid</span> {}
<span class="hljs-comment">/* Tous les éléments */</span>
* {}
</code></pre>
<p>Pour spécifier une classe ou un id on rajoute <code>id="someid"</code> ou <code>class="someclass"</code> à l'élément :</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"someid"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"someclass class1 class2"</span>></span>...<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
</code></pre>
<p>Un id est unique, un élément possède au plus 1 id et deux éléments ne peuvent pas avoir le même. Un élément peut avoir plusieurs classes et plusieurs éléments peuvent avoir la même classe.
La convention pour les classes et les id est de ne pas utiliser les majuscules et de séparer les mots par des tirets : <code>some-complex-class</code> ou <code>text-section-6</code>.</p>
<blockquote>
<p>Les id et les classes seront aussi utilisées par le javascript de la page, attention à bien choisir vos noms de classes et surtout d'id.</p>
</blockquote>
<h4 id="sélecteurs-combinatoires">Sélecteurs combinatoires</h4>
<pre><code class="hljs language-css"><span class="hljs-comment">/* S'applique à tous les &#x3C;span> et les &#x3C;div> */</span>
<span class="hljs-selector-tag">span</span>, <span class="hljs-selector-tag">div</span> {}
<span class="hljs-comment">/* S'applique à toutes les &#x3C;div> qui sont à l'intérieur d'un &#x3C;span> */</span>
<span class="hljs-selector-tag">span</span> <span class="hljs-selector-tag">div</span> {}
<span class="hljs-comment">/* S'applique à toutes les &#x3C;div> qui sont les enfants directes d'un &#x3C;span> */</span>
<span class="hljs-selector-tag">span</span> > <span class="hljs-selector-tag">div</span> {}
<span class="hljs-comment">/* S'applique à tous les &#x3C;span> de classe "someclass" */</span>
<span class="hljs-selector-tag">span</span><span class="hljs-selector-class">.someclass</span> {}
<span class="hljs-comment">/* S'applique au &#x3C;span> d'id "someid" */</span>
<span class="hljs-selector-tag">span</span><span class="hljs-selector-class">.someid</span> {}

<span class="hljs-comment">/* Ces sélecteurs peuvent être chaînés : */</span>
<span class="hljs-selector-tag">span</span><span class="hljs-selector-class">.class1</span>,
<span class="hljs-selector-id">#id1</span> > <span class="hljs-selector-id">#id2</span> <span class="hljs-selector-tag">div</span>,
<span class="hljs-selector-class">.class1</span><span class="hljs-selector-class">.class2</span> {}
</code></pre>
<blockquote>
<p>Quand vous utilisez les <code>,</code> n'hésitez pas à mettre vos différents sélecteurs sur plusieurs lignes.</p>
</blockquote>
<h4 id="selecteurs-complexes">Selecteurs complexes</h4>
<pre><code class="hljs language-css"><span class="hljs-comment">/* S'applique aux &#x3C;div> qui sont les premiers enfants de leurs parents */</span>
<span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:first</span>-child {}
<span class="hljs-comment">/* S'applique aux &#x3C;div> qui sont les derniers enfants de leurs parents */</span>
<span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:last-child</span> {}
<span class="hljs-comment">/* S'applique aux &#x3C;div> qui sont les 5ème éléments de leurs parents */</span>
<span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">5</span>) {}
<span class="hljs-comment">/* S'applique aux &#x3C;div> qui n'ont pas la classe "someclass" */</span>
<span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-class">.someclass</span>) {}
<span class="hljs-comment">/* S'applique aux &#x3C;a> (balise de lien) qui ont déjà été visités */</span>
<span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:active</span> {}
<span class="hljs-comment">/* S'applique aux &#x3C;input type="text"> */</span>
<span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=text]</span> {}
<span class="hljs-comment">/* S'applique aux éléments sous le curseur */</span>
<span class="hljs-selector-pseudo">:hover</span> {}
</code></pre>
<ul>
<li>L'opérateur <code>:not(selecteur)</code> fonctionne avec tous les selecteurs.</li>
<li>Les opérateurs <code>:first-child</code> et cie fonctionnent tel-quel, ils sont souvent utilisés comme dans le premier exemple de la section suivante.</li>
<li>Les opérateurs <code>[propriete=valeur]</code> sont utilisables sur tous les éléments.</li>
</ul>
<h4 id="exemples">Exemples</h4>
<pre><code class="hljs language-css"><span class="hljs-comment">/* Le dernier élément de #someid */</span>
<span class="hljs-selector-id">#someid</span> > <span class="hljs-selector-pseudo">:last-child</span> {}
<span class="hljs-comment">/* Tous les enfants des éléments de la liste #video-list */</span>
<span class="hljs-selector-id">#videos-list</span> > <span class="hljs-selector-tag">li</span> > * {}
<span class="hljs-comment">/* Toutes les .section-container sauf la première de la #section-6 */</span>
<span class="hljs-selector-id">#section-6</span> <span class="hljs-selector-class">.section-container</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:first</span>-of-type) {}
<span class="hljs-comment">/* Les images filles de #empty-dir-info */</span>
<span class="hljs-selector-id">#empty-dir-info</span> > <span class="hljs-selector-tag">img</span> {}
<span class="hljs-comment">/* Les éléments de classe "file-name-edit" ou file-delete" fils d'un élément de classe "file-repr" qui n'est pas sous le curseur */</span>
<span class="hljs-selector-class">.file-repr</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:hover</span>) <span class="hljs-selector-class">.file-name-edit</span>,
<span class="hljs-selector-class">.file-repr</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:hover</span>) <span class="hljs-selector-class">.file-delete</span> {}
</code></pre>
<p>Pour plus de selecteurs allez sur <a href="https://www.w3schools.com/cssref/css_selectors.asp">w3school</a>, mais normalement vous devriez pouvoir tout faire avec ceux-là.</p>
<blockquote>
<p><strong>Note</strong> <strong>Quels sélecteurs utiliser</strong></p>
<ul>
<li>Si vous avez un unique élément à styler utilisez un id ou les sélecteurs <code>xx > :last-child</code>.</li>
<li>Si vous avez plusieurs éléments à plusieurs endroits dans le document utilisez les classes.</li>
<li>Si vous voulez styler tous les éléments d'une liste utilisez <code>></code>.</li>
<li>Pour les sélecteurs plus spécifiques utilisez des classes aussi : <code>.dark-on-hover:hover</code>.</li>
</ul>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Utilisez plusieurs .css</strong></p>
<p>Essayez de bien séparer vos .css, si vous pouvez réutiliser un même fichier pour plusieurs pages vous vous en sortirez mieux, mais ca ne sera pas possible si votre .css contient des sélecteurs trop vastes (<code>*</code>, <code>li</code>...).</p>
</blockquote>
<h3 id="les-devtools">Les devtools</h3>
<p>La console et l'inspecteur web sont les meilleurs amis du développeur web. Ils permettent de tester du js, de vérifier que l'html est bon, de comprendre ce qui ne va pas dans l'arborescence css, de tester du css/js sans avoir à écrire dans un fichier et recharger la page etc...</p>
<p>Pour ouvrir les outils de développement web (devtools) cherchez le bouton dans les menus de votre navigateur, sous Firefox vous pouvez aussi faire f12 ou Ctrl+Shift+I.</p>
<blockquote>
<p><strong>Note</strong> <strong>L'inspecteur css</strong></p>
<p><img src="resources/inspector-0.png" alt="missing inspector image"></p>
<p><img src="resources/inspector-1.png" alt="missing image &#x22;inspector-1.png&#x22;"></p>
<p>Vous pouvez directement voir et éditer les propriétés css d'un élément de la page. Si vous voulez conserver vos modifications vous pouvez directement les copier dans votre .css, autrement il suffit de recharger la page pour qu'elles disparaissent.
L'onglet "calculé" est pratique quand vous cherchez des couleurs ou des polices sur un site web, pour pouvoir les copier sur le votre.</p>
<p>Dans l'onglet "Mise en page" vous pouvez voir les dimensions d'un élément, ses marges et espacements.</p>
<p>Avec Ctrl+Shift+C vous pouvez sélectionner un élément de la page sans passer par l'inspecteur html.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>La console JS</strong></p>
<p><img src="resources/inspector-2.png" alt="missing image &#x22;inspector-2.png&#x22;"></p>
<p><img src="resources/inspector-3.png" alt="missing image &#x22;inspector-3.png&#x22;"></p>
<p>Vous pouvez écrire n'importe quoi dans la console dynamique et avoir immédiatement le résultat.</p>
<p>Vous pouvez voir les problèmes de chargement en activant les <code>requêtes</code> et le <code>xhr</code> dans les filtres. Ici par exemple le favicon n'a pas pu être chargé car il n'existe pas.</p>
<p>Vous aurez certainement un bon nombre de messages d'alerte qui ne servent pas à grand-chose, par exemple ici j'ai un "-moz-osx-font-smoothing : propriété inconnue" qui vient des feuilles de style par défaut de firefox.</p>
</blockquote>
<blockquote>
<p><strong>Warning</strong> <strong>Le cache http</strong></p>
<p>Avant de commencer à écrire du css, il faut <em>toujours</em> désactiver le cache http. Par défaut votre navigateur enregistre les feuilles de style pour éviter d'avoir à les télécharger à chaque changement de page, mais il arrive que le cache se bloque et que le navigateur ne détecte pas les changements que vous avez apporté à votre .css, pour éviter ça le plus simple est de complètement désactiver le cache.</p>
<p><img src="resources/inspector-config-1.png" alt="missing image &#x22;inspector-config-1.png&#x22;"></p>
<p>De cette manière tous les .css, .js etc sont complètement rechargés à chaque rechargement de la page. Ça peut vous poser problème si vous avez de grosses images à charger à chaque fois, dans ce cas vous pouvez aussi laisser le cache et faire Ctrl+f5 pour recharger la page sans le cache si vous voyez qu'il s'est bloqué.</p>
</blockquote>
<h3 id="positionnement">Positionnement</h3>
<p>Le positionnement est la partie la plus longue est compliquée du css. Si vous maitrisez ça vous pouvez tout faire.</p>
<p>Voici une liste des propriétés de positionnement, si vous comprenez les premières et les <code>flexbox</code> vous aurez déjà un très bon niveau.</p>
<table>
<thead>
<tr>
<th>Style</th>
<th>Utilité</th>
</tr>
</thead>
<tbody>
<tr>
<td>margin</td>
<td>Applique une marge extérieure</td>
</tr>
<tr>
<td>padding</td>
<td>Applique une marge intérieure</td>
</tr>
<tr>
<td>border</td>
<td>Applique une bordure</td>
</tr>
<tr>
<td>display</td>
<td>Change le type de positionnement dans le parent</td>
</tr>
<tr>
<td>position</td>
<td>Change le type de positionnement dans la page</td>
</tr>
<tr>
<td>width</td>
<td>Donne la largeur</td>
</tr>
<tr>
<td>height</td>
<td>Donne la hauteur</td>
</tr>
<tr>
<td>vertical-align</td>
<td>Aligne cet élément verticalement par rapport à la ligne de texte</td>
</tr>
<tr>
<td>text-align</td>
<td>Aligne les enfants de cet élément</td>
</tr>
<tr>
<td>white-space</td>
<td>Permet d'empêcher un retour à la ligne</td>
</tr>
</tbody>
</table>
<p><strong>margin, padding, border:</strong></p>
<p><img src="resources/style-2.png" alt="missing image &#x22;style-2.png&#x22;"></p>
<ul>
<li>La <code>margin</code> est une marge extérieure, deux <code>margin</code> peuvent se chevaucher (ici les deux carrés rouges ne sont séparés que par 30px, pas 60px).</li>
<li>Le <code>padding</code> est une marge intérieure, une <code>margin</code> et un <code>padding</code> peuvent se chevaucher mais un padding ne peut pas dépasser une <code>margin</code>.</li>
<li>La <code>border</code> s'applique entre les deux marges, on l'utilise surtout pour styler les éléments, pas vraiment pour les placer.</li>
</ul>
<p>Rapportez vous à l'onglet <em>Mise en page</em> des devtools pour vérifier que vos marges sont bonnes ou y trouver des problèmes.</p>
<p><strong>display:</strong></p>
<ul>
<li>flex - liste dynamique~</li>
<li>none - cache l'élément</li>
<li>block - l'élément prend toute une ligne</li>
<li>inline - l'élément s'insère dans une ligne, on ne peut plus lui donner une taille</li>
<li>inline-block - inline mais sa taille peut être forcée</li>
<li>grid - affichage grille, utilisez <code>&#x3C;table></code> à la place de cette propriété</li>
</ul>
<blockquote>
<p><strong>Note</strong> <strong>Les Flexbox</strong></p>
<p>L'affichage flexbox permet de redimensionner automatiquement un containeur à la taille de ce qu'il contient, c'est très pratique quand vous ne savez pas exactement quelle taille font vos éléments.
Allez regarder <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">ici</a> pour plus d'info !</p>
</blockquote>
<p><strong>position</strong>:</p>
<ul>
<li>absolute - utilisé avec <code>top left right bottom</code> pour donner une position dans l'élément parent le plus proche de position <code>relative</code>. Souvent utilisé pour les popups car la position ne dépend plus du scroll.</li>
<li>relative - comme par défaut, utilisé avec <code>absolute</code>.</li>
<li>sticky - comme le positionnement par défaut mais ne peut pas sortir de l'écran, souvent utilisé pour les bannières (champ de recherche de google par exemple).</li>
</ul>
<blockquote>
<p><strong>Note</strong> <strong>Quand utiliser quoi</strong></p>
<p>Les propriétés les plus importantes à connaître sont <code>margin</code>, <code>padding</code>, <code>display: flex</code> et <code>position: absolute</code> (plus rarement utilisée).
Si possible évitez de donner des tailles fixes à vos éléments (<code>width</code>/<code>height</code>), préférez laisser la page s'organiser toute seule.</p>
</blockquote>
<h4 id="les-unités">Les unités</h4>
<blockquote>
<p><strong>Note</strong> <strong>Unités de taille</strong></p>
<table>
<thead>
<tr>
<th>Unité</th>
<th>Dimension</th>
<th>Exemple</th>
</tr>
</thead>
<tbody>
<tr>
<td>px</td>
<td>nombre en pixels</td>
<td><code>10px</code> - 10 pixels</td>
</tr>
<tr>
<td>%</td>
<td>taille relative au parent</td>
<td><code>10%</code> - 10% de la largeur du parent</td>
</tr>
<tr>
<td>rem</td>
<td>taille relative à la taille du texte de la page</td>
<td><code>2.5rem</code> - 2,5 fois la taille du texte</td>
</tr>
<tr>
<td>em</td>
<td>taille relative à la taille du texte du parent</td>
<td><code>2.5em</code> - 2,5 fois la taille du texte</td>
</tr>
<tr>
<td>vw</td>
<td>taille relative à la largeur de la page</td>
<td><code>50vw</code> - 50% de la largeur de la page</td>
</tr>
<tr>
<td>vh</td>
<td>taille relative à la hauteur de la page</td>
<td><code>50vh</code> - 50% de la hauteur de la page</td>
</tr>
</tbody>
</table>
<p>Il en existe d'autres mais qui sont beaucoup plus rarement utilisées.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Unités de couleur</strong></p>
<table>
<thead>
<tr>
<th>Format</th>
<th>Usage</th>
<th>Exemple</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>nom</em></td>
<td>nom de la couleur</td>
<td><code>red</code>, <code>dark-grey</code></td>
</tr>
<tr>
<td>rgb(<em>r</em>, <em>g</em>, <em>b</em>)</td>
<td>couleur rgb</td>
<td><code>rgb(200, 245, 43)</code></td>
</tr>
<tr>
<td>rgba(<em>r</em>, <em>g</em>, <em>b</em>, <em>a</em>)</td>
<td>couleur rgba</td>
<td><code>rgba(200, 245, 43, 0.4)</code></td>
</tr>
<tr>
<td>#rrggbb</td>
<td>couleur hexadécimale</td>
<td><code>#ffbba2</code></td>
</tr>
<tr>
<td>#rrggbbaa</td>
<td>couleur hexadécimale</td>
<td><code>#ffbba2a0</code></td>
</tr>
<tr>
<td>hsl(<em>h</em>, <em>s</em>, <em>l</em>)</td>
<td>couleur hsl</td>
<td><code>hsl(360, 100%, 50%)</code></td>
</tr>
<tr>
<td>hsl(<em>h</em>, <em>s</em>, <em>l</em>, <em>a</em>)</td>
<td>couleur hsla</td>
<td><code>hsl(360, 100%, 50%, 0.4)</code></td>
</tr>
</tbody>
</table>
<p>Pour trouver une couleur utilisez votre ide ou tapez "color picker" sur google.</p>
</blockquote>
<h3 id="styles">Styles</h3>
<p>Styles utiles :</p>
<table>
<thead>
<tr>
<th>Style</th>
<th>Utilité</th>
</tr>
</thead>
<tbody>
<tr>
<td>background-color</td>
<td>couleur de fond</td>
</tr>
<tr>
<td>color</td>
<td>couleur du texte</td>
</tr>
<tr>
<td>font-family</td>
<td>police à utiliser</td>
</tr>
<tr>
<td>font-size</td>
<td>taille du texte</td>
</tr>
<tr>
<td>user-select</td>
<td>permet d'empêcher la sélection</td>
</tr>
<tr>
<td>list-style</td>
<td>permet de retirer les points des listes</td>
</tr>
<tr>
<td>border-radius</td>
<td>permet d'arrondir un élément</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note</strong> <strong>Exemples</strong></p>
<p>Vous trouverez quelques exemples dans les .html liés à côté du cours. Allez voir pour trouver votre bonheur.</p>
</blockquote>
<h3 id="outils-supplémentaires">Outils supplémentaires</h3>
<h4 id="google-icons">Google icons</h4>
<p>Souvent, rajouter des icônes à un site change vraiment son visuel, j'utilise beaucoup <a href="https://fonts.google.com/icons">google icons</a> pour ça.
Il vous suffit de rajouter ce code dans la balise <code>&#x3C;head></code> :</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&#x3C;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com/icon?family=Material+Icons"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>></span>
</code></pre>
<p>Ensuite vous pourrez intégrer des icônes en les trouvant <a href="https://fonts.google.com/icons">ici</a>, il y a le code html à droite après avoir choisi un icône.</p>
<h4 id="dautres-outils">D'autres outils</h4>
<p>Vous pouvez utiliser <a href="https://html-css-js.com/css/generator/box-shadow/">ce site</a> pour générer des effets sur les bordures.
Vous pouvez utiliser <a href="https://getwaves.io/">ce site</a> pour générer des vagues en svg et les intégrer à vos pages en tant qu'images.</p>
<hr>
<h2 id="requêtes">Requêtes</h2>
<p>Avant de passer à la partie dynamique (php/js) il vaut mieux comprendre les requêtes.</p>
<p>En web, tout passe par des <em>requêtes</em> : quand vous chargez une page web votre navigateur émet une première requête pour demander la page au site web. Après avoir obtenu la page il va envoyer une nouvelle requête pour chaque fichier css/js/... nécessaire. Et pour interagir avec le serveur (quand on se connecte, quand on clique sur un bouton...) une ou plusieurs requêtes peuvent être envoyées.
Chaque requête possède une url de destination et peut posséder des paramètres.</p>
<blockquote>
<p><strong>Note</strong> <strong>Requête GET</strong></p>
<p>La requête GET est la plus simple, elle demande un document au serveur. Elle peut contenir des paramètres qui sont encodés dans l'url :</p>
<pre><code class="hljs language-ini">https://www.youtube.com/watch?<span class="hljs-attr">v</span>=lhjk5x54bsE
</code></pre>
<p>Ici il y a un paramètre : <code>v=lhjk5x54bsE</code> (nom=<code>v</code> valeur=<code>lhjk5x54bsE</code>). Il peut y en avoir plusieurs, séparés par des <code>&#x26;</code>.
Quand vous chargez une page c'est une requête GET qui est envoyée, avec l'url de la page.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Requête POST</strong></p>
<p>La requête POST est équivalente à GET mais les paramètres sont cachés dans le corps de la requête, pas dans l'url. Elle est utilisée pour la connexion par exemple, pour éviter d'afficher un mot de passe dans l'url.</p>
</blockquote>
<blockquote>
<p>Il y a d'autres types de requêtes mais GET et POST suffisent pour tout faire, surtout pour un premier site web.</p>
</blockquote>
<p>Les manières dont vous allez vous servir pour créer votre site sont les <em>liens</em> et les <em>forms</em>.</p>
<h3 id="liens">Liens</h3>
<p>Les liens permettent de passer d'une page à une autre, avec un bouton ou un lien hypertexte. Les liens sont simplement les balises <code>&#x3C;a href="..."></code> que vous allez ajouter à votre page. Pour ajouter des paramètres il suffit de les rajouter dans l'url avec <code>url?param1=val1&#x26;param2=val2</code>.
Par exemple : <code>&#x3C;a href="https://www.youtube.com/watch?v=RKW6rjnYEkc">Un lien!&#x3C;/a></code>.</p>
<h3 id="forms">Forms</h3>
<p>Les <em>forms</em> (formulaires) sont les balises <code>&#x3C;form action="..." method="..."></code> de la page. L'action du form est l'url qui recevra la requête, la méthode est le type de requête (GET/POST/...), par défaut envoyer un formulaire revient à aller sur la page de l'url du form.
Pour passer des paramètres il vous faut des balises <code>&#x3C;input type="..."/></code>.</p>
<p>Plus d'info dans les exemples.</p>
<hr>
<h2 id="php">php</h2>
<p>PHP est un langage qui tourne côté serveur et qui permet de servir des informations dynamiques.</p>
<p>Avant d'écrire du php il faut faire tourner un serveur php, si vous ne l'aviez pas déjà fait démarrez un serveur (wxl)amp et placez vos fichier dans le dossier <code>htdocs/</code> du serveur, son emplacement dépend de votre *amp. Ensuite il vous suffit de renommer vos fichiers .html en .php.</p>
<p>Vous pouvez tester que php est bien installé en ajoutant <code>&#x3C;?= "truc" ?></code> dans un élément de votre html. Vous devriez voir le texte s'afficher dans la page.</p>
<p>PHP s'intègre à l'html via des <em>balises php</em>, qui commencent par <code>&#x3C;?php</code> et qui finissent par <code>?></code>, dans une balise php vous pouvez exécuter ce que vous voulez et afficher des choses via <code>echo</code> ou <code>print_r</code>. Vous pouvez aussi afficher directement quelque chose avec une balise php <code>&#x3C;?= choseàafficher ?></code>.</p>
<p>Exemple :</p>
<pre><code class="hljs language-php"><span class="hljs-meta">&#x3C;?php</span>
<span class="hljs-variable">$list</span> = [ <span class="hljs-string">"item 1"</span>, <span class="hljs-string">"item 2"</span>, <span class="hljs-string">"item 3"</span> ];
<span class="hljs-meta">?></span>  
&#x3C;!DOCTYPE html>
&#x3C;html>
&#x3C;head>...&#x3C;/head>
&#x3C;body>
  &#x3C;ul>
    <span class="hljs-meta">&#x3C;?php</span>
      <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$list</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$element</span>)
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"&#x3C;li>"</span> . <span class="hljs-variable">$element</span> . <span class="hljs-string">"&#x3C;/li>"</span>;
    <span class="hljs-meta">?></span>
  &#x3C;/ul>
&#x3C;/body>
&#x3C;/html>
</code></pre>
<h3 id="syntaxe-de-base">Syntaxe de base</h3>
<ul>
<li>Toutes les variables commencent par $</li>
<li>Les <code>;</code> de fin de ligne sont obligatoires</li>
<li>Comme en JS, vous n'avez pas besoin de classes pour les projets simples, vous pouvez utiliser les tableaux. cf l'exemple</li>
</ul>
<pre><code class="hljs language-php"><span class="hljs-meta">&#x3C;?php</span>

<span class="hljs-variable">$a</span> = <span class="hljs-number">4</span>;
<span class="hljs-comment">// boucle for classique</span>
<span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$i</span> &#x3C; <span class="hljs-variable">$a</span>; <span class="hljs-variable">$i</span>++)
  <span class="hljs-keyword">echo</span> <span class="hljs-string">"<span class="hljs-subst">$i</span> + 3 = "</span> . (<span class="hljs-variable">$i</span>+<span class="hljs-number">3</span>) . <span class="hljs-string">"&#x3C;br>"</span>;

<span class="hljs-comment">// liste, les éléments ne sont pas forcément du même type</span>
<span class="hljs-variable">$array</span> = [ <span class="hljs-variable">$a</span>, <span class="hljs-number">4</span>, <span class="hljs-string">"foo"</span> ];
<span class="hljs-comment">// ajouter à une liste</span>
<span class="hljs-variable">$array</span>[] = <span class="hljs-number">43</span>;
<span class="hljs-comment">// afficher une liste</span>
<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$array</span>);
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&#x3C;br>"</span>;

<span class="hljs-comment">// un tableau peut avoir des clés</span>
<span class="hljs-variable">$car</span> = [ <span class="hljs-string">"wheels"</span> => <span class="hljs-number">4</span>, <span class="hljs-string">"speed"</span> => <span class="hljs-number">80</span>, <span class="hljs-string">"name"</span> => <span class="hljs-string">"a car"</span> ];
<span class="hljs-comment">// quand vous affichez de grands tableaux, utilisez &#x3C;pre></span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&#x3C;pre>"</span>;
<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$car</span>);
<span class="hljs-keyword">echo</span> <span class="hljs-string">"&#x3C;/pre>"</span>;
<span class="hljs-comment">// un tableau peut être indexé de cette manière</span>
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$car</span>[<span class="hljs-string">'wheels'</span>] . <span class="hljs-string">"&#x3C;br>"</span>;

<span class="hljs-comment">// les textes peuvent être composés avec .</span>
<span class="hljs-variable">$str1</span> = <span class="hljs-string">"a "</span> . <span class="hljs-string">"text"</span>;
<span class="hljs-comment">// les " permettent de formater avec des variables, les ' non</span>
<span class="hljs-variable">$str2</span> = <span class="hljs-string">"<span class="hljs-subst">$str1</span> with <span class="hljs-subst">$a</span> words"</span>; <span class="hljs-comment">// a text with 4 words</span>
<span class="hljs-variable">$str3</span> = <span class="hljs-string">'$str1 with $a words'</span>; <span class="hljs-comment">// $str1 with $a words</span>
<span class="hljs-variable">$str4</span> = <span class="hljs-string">"the car has <span class="hljs-subst">$car</span>[wheels] wheels"</span>; <span class="hljs-comment">// the car has 4 wheels</span>

<span class="hljs-comment">// boucle foreach, avec les clés</span>
<span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$car</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> => <span class="hljs-variable">$value</span>)
  <span class="hljs-keyword">echo</span> <span class="hljs-string">"<span class="hljs-subst">$key</span> -> <span class="hljs-subst">$value</span>&#x3C;br>"</span>;
<span class="hljs-comment">// boucle foreach, sans les clés</span>
<span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$value</span>)
  <span class="hljs-keyword">echo</span> <span class="hljs-string">"[] <span class="hljs-subst">$value</span>&#x3C;br>"</span>;
 
<span class="hljs-meta">?></span>
</code></pre>
<blockquote>
<p><strong>Note</strong> <strong>Inclusions de fichiers</strong></p>
<p>Pour utiliser plusieurs fichiers vous pouvez mettre <code>include "autrefichier.php";</code> dans une balise php. Pour éviter les doubles inclusions il y a la même chose avec <code>include_once</code>. Le chemin du fichier est relatif au fichier courant.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Librairie standard</strong></p>
<p>Un aspect du php que je n'aime pas du tout mais qu'on ne peut pas éviter c'est que la librairie standard est immense, si vous avez besoin d'une fonction qui fait n'importe quoi il y a beaucoup de chance qu'elle existe déjà, il faut juste connaître son nom et le format de ses paramètres. Par exemple les fonctions "classiques" :
<code>ceil()</code> <code>count()</code> <code>die()</code> <code>empty()</code> <code>exit()</code>  <code>header()</code> <code>include()</code>  <code>isset()</code> <code>mkdir()</code> <code>phpinfo()</code> <code>preg_match()</code> <code>print_r()</code> <code>rand()</code> <code>require()</code> <code>str_replace()</code> <code>str_len()</code> <code>trim()</code></p>
</blockquote>
<h3 id="intégration-en-html">Intégration en html</h3>
<p>Ce que vous utiliserez le plus souvent c'est l'intégration avec des <code>&#x3C;?= ... ?></code> et des <code>foreach</code> pour afficher des listes :</p>
<pre><code class="hljs language-php">&#x3C;ul id=<span class="hljs-string">"videos-list"</span>>
<span class="hljs-meta">&#x3C;?php</span>
  <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$filtered_videos</span>) !== <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$i</span> &#x3C; <span class="hljs-number">10</span>; <span class="hljs-variable">$i</span>++) {
      <span class="hljs-variable">$video</span> = <span class="hljs-variable">$filtered_videos</span>[<span class="hljs-title function_ invoke__">array_rand</span>(<span class="hljs-variable">$filtered_videos</span>)];
<span class="hljs-meta">?></span>
  &#x3C;li>
    &#x3C;a href=<span class="hljs-string">"&#x3C;?= <span class="hljs-subst">$video</span>['url'] ?>"</span>>
      &#x3C;img src=<span class="hljs-string">"&#x3C;?= <span class="hljs-subst">$video</span>['vignette'] ?>"</span> <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">video</span>-<span class="hljs-title">vignette</span>">
      &#x3C;<span class="hljs-title">div</span>>
        &#x3C;<span class="hljs-title">div</span>>&#x3C;?= $<span class="hljs-title">video</span>['<span class="hljs-title">title</span>'] ?>&#x3C;/<span class="hljs-title">div</span>>
        &#x3C;<span class="hljs-title">span</span>>&#x3C;?= $<span class="hljs-title">video</span>['<span class="hljs-title">author</span>'] ?>&#x3C;/<span class="hljs-title">span</span>>&#x3C;<span class="hljs-title">br</span>/>
        &#x3C;<span class="hljs-title">span</span> <span class="hljs-title">class</span>="<span class="hljs-title">small</span>-<span class="hljs-title">text</span>">&#x3C;?= $<span class="hljs-title">video</span>['<span class="hljs-title">views</span>'] ?> <span class="hljs-title">views</span>&#x3C;/<span class="hljs-title">span</span>>
      &#x3C;/<span class="hljs-title">div</span>>
    &#x3C;/<span class="hljs-title">a</span>>
  &#x3C;/<span class="hljs-title">li</span>>
&#x3C;?<span class="hljs-title">php</span> } } ?>
&#x3C;/<span class="hljs-title">ul</span>>
</span></code></pre>
<p>Là vous pouvez remarquer que les corps du <code>if</code> et du <code>for</code> commencent dans une balise php, contiennent le corps html et finissent dans une deuxième balise php. C'est assez commun comme manière de faire.</p>
<blockquote>
<p><strong>Note</strong> <strong>Paramètres GET et POST</strong></p>
<p>En php on peut récupérer les paramètres des requêtes GET et POST avec les variables globales <code>$_GET</code> et <code>$_POST</code>. Pour vérifier que les paramètres sont bien remplis on peut utiliser <code>isset()</code> :</p>
<pre><code class="hljs language-php"><span class="hljs-meta">&#x3C;?php</span>

<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'username'</span>]) || !<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'password'</span>])) {
  <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Location: /bad_connection.html?reason=missing_info"</span>); <span class="hljs-comment">// redirection</span>
  <span class="hljs-keyword">exit</span>(); <span class="hljs-comment">// stoppe l'exécution du php</span>
}
<span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">areValidCredencials</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'username'</span>], <span class="hljs-variable">$_POST</span>[<span class="hljs-string">'password'</span>])) {
  <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Location: /bad_connection.html?reason=bad_credentials"</span>); <span class="hljs-comment">// redirection</span>
  <span class="hljs-keyword">exit</span>(); <span class="hljs-comment">// stoppe l'exécution du php</span>
}

<span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Location: /my_account.html"</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">areValidCredencials</span>(<span class="hljs-params"><span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span></span>) </span>{
  ... <span class="hljs-comment">// probablement une requête sur une base de données</span>
}
<span class="hljs-meta">?></span>
</code></pre>
<p>Attention à ne pas utiliser <code>$_GET['truc']</code> avant d'avoir vérifié que <code>truc</code> est bien un paramètre qui existe !</p>
<blockquote>
<p>Cet exemple n'est pas complet, si c'était écrit comme ça on ne pourrait pas différencier les comptes d'utilisateurs différents.</p>
</blockquote>
</blockquote>
<h3 id="sessions">Sessions</h3>
<p>Les sessions sont un moyen de conserver des données entre deux pages, sans passer par les requêtes GET et POST. Quand un client vient sur une page web on peut démarrer une session, si le client avait déjà une session elle est reprise et on peut lire les données de session, sinon une nouvelle est créée et sera supprimée après un certain temps après la dernière connexion du client au site.</p>
<blockquote>
<p><strong>Note</strong> <strong>Utilité des sessions</strong></p>
<p>Les sessions sont très pratiques par exemple pour stocker l'ID d'un utilisateur après qu'il se soit connecté, pour éviter de lui redemander son mot de passe et nom de compte à chaque page.</p>
</blockquote>
<pre><code class="hljs language-php">----- page principale du compte -----
<span class="hljs-meta">&#x3C;?php</span>
<span class="hljs-title function_ invoke__">session_start</span>();

<span class="hljs-comment">// redirection si l'utilisateur n'est pas connecté</span>
<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">"user_id"</span>])) {
    <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Location: /connection"</span>);
    <span class="hljs-keyword">exit</span>();
}
<span class="hljs-meta">?></span>
    
...
    
&#x3C;div>Bienvenu <span class="hljs-meta">&#x3C;?=</span> <span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">'user_name'</span>] <span class="hljs-meta">?></span>&#x3C;/div>
</code></pre>
<pre><code class="hljs language-php">----- page de connexion -----
<span class="hljs-meta">&#x3C;?php</span>
<span class="hljs-title function_ invoke__">start_session</span>();
    
<span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'user_name'</span>]) &#x26;&#x26; <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'password'</span>])) {
    <span class="hljs-variable">$userID</span> = <span class="hljs-variable">$database</span>-><span class="hljs-title function_ invoke__">getUserID</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">'username'</span>], <span class="hljs-variable">$_POST</span>[<span class="hljs-string">'password'</span>]);
    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$userID</span> !== False) {
        <span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">'user_id'</span>] = <span class="hljs-variable">$userID</span>;
        <span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">"Location: /my-account"</span>);
        <span class="hljs-keyword">exit</span>();
    }
}
<span class="hljs-meta">?></span>
</code></pre>
<p>Vous pouvez stocker à peu près tout dans les variables de sessions.</p>
<blockquote>
<p><strong>Note</strong> <strong>Détruire une session</strong></p>
<p>Pour vos tests, faites vous une page qui contient seulement :</p>
<pre><code class="hljs language-php"><span class="hljs-meta">&#x3C;?php</span>
<span class="hljs-title function_ invoke__">session_start</span>();  
<span class="hljs-title function_ invoke__">session_unset</span>();
<span class="hljs-title function_ invoke__">session_destroy</span>();
<span class="hljs-meta">?></span>
</code></pre>
<p>Ca vous permettra de remettre à zéro les variables de session simplement en rechargeant la page.</p>
</blockquote>
<h3 id="pdo">PDO</h3>
<p>PDO est une des deux manières en php d'accéder à une bdd, c'est la plus récente des deux.
Pour se connecter et faire une requête SELECT :</p>
<pre><code class="hljs language-php"><span class="hljs-comment">// the connection, one is enough for the program's lifetime</span>
<span class="hljs-variable">$connection</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">PDO</span>(<span class="hljs-string">"mysql:host=localhost;dbname=mabdd"</span>, <span class="hljs-string">"root"</span>, <span class="hljs-string">"password"</span>);
<span class="hljs-variable">$connection</span>-><span class="hljs-title function_ invoke__">setAttribute</span>(PDO::<span class="hljs-variable constant_">ATTR_ERRMODE</span>, PDO::<span class="hljs-variable constant_">ERRMODE_EXCEPTION</span>);

<span class="hljs-comment">// prepare the query, the '?' symbols get replaced by the parameters to execute()</span>
<span class="hljs-variable">$request</span> = <span class="hljs-variable">$connection</span>-><span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"SELECT * FROM table WHERE column = ?;"</span>);
<span class="hljs-variable">$request</span>-><span class="hljs-title function_ invoke__">execute</span>([ <span class="hljs-number">3</span> ]);
<span class="hljs-comment">// get the query's results</span>
<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$request</span>-><span class="hljs-title function_ invoke__">fetchAll</span>(PDO::<span class="hljs-variable constant_">FETCH_ASSOC</span>));
</code></pre>
<p>Quelques précisions :</p>
<ul>
<li><code>fetchAll()</code> peut être remplacé par <code>fetch()</code> pour ne récupérer qu'une seule ligne du select ou peut être omis complètement pour une requête <code>INSERT</code> par exemple.</li>
<li>utilisez <em>toujours</em> les '?' dans vos requêtes, ça vous protège des <a href="https://www.w3schools.com/sql/sql_injection.asp">injections sql</a>.</li>
<li>Vous pouvez aussi nommer vos paramètres plutôt que d'utiliser les '?' :</li>
</ul>
<pre><code class="hljs language-php"><span class="hljs-variable">$request</span> = <span class="hljs-variable">$connection</span>-><span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">"SELECT * FROM table WHERE column = :value;"</span>);
<span class="hljs-variable">$request</span>-><span class="hljs-title function_ invoke__">execute</span>([ <span class="hljs-string">'value'</span> => <span class="hljs-number">3</span> ]);
</code></pre>
<p>Vous trouverez un fichier <code>db_connection.php</code> pour la connexion et un exemple dont vous pourrez vous inspirer.</p>
<blockquote>
<p><strong>Note</strong> <strong>Bonne pratique</strong></p>
<p>Le plus simple et le plus ergonomique dans vos projets c'est de n'avoir qu'un seul fichier responsable de la connexion à la bdd et de faire toutes vos requêtes dedans.
Si vous avez l'envie de faire bien et <em>beaucoup</em> de temps faites une interface "data storage" et une implémentation "database storage", d'un point de vue génie logiciel c'est le top.</p>
</blockquote>
<blockquote>
<p><strong>Warning</strong> <strong>A ne jamais faire</strong></p>
<p>Ne mettez <em>jamais</em> de code sql dans vos fichiers html ni dans le code javascript, l'utilisateur ne doit jamais avoir accès à votre base de donnée directement.</p>
</blockquote>
<h3 id="communication-avec-lextérieur">Communication avec l'extérieur</h3>
<p>Il arrive qu'on veuille envoyer des données sans passer par une page web, dans ce cas on peut aussi utiliser php comme langage de <em>back-end</em>.</p>
<p>Par exemple, si j'ai un serveur qui contient des historiques utilisateur stockées dans une base de données, je peut vouloir les rendre accessible via une <em>API</em>, ca veut dire qu'il n'y aura pas de <em>page web</em> mais qu'on peut quand même y accéder via une url :</p>
<pre><code class="hljs language-php"><span class="hljs-meta">&#x3C;?php</span>

<span class="hljs-comment">// open a database connection</span>
<span class="hljs-comment">// maybe check for user identification...</span>
<span class="hljs-comment">// retrieve the data from the database</span>
<span class="hljs-variable">$data</span> = <span class="hljs-variable">$database</span>-><span class="hljs-title function_ invoke__">fetchUserHistoryData</span>(<span class="hljs-variable">$user</span>);
<span class="hljs-comment">// show the data</span>
<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$data</span>);
<span class="hljs-meta">?></span>
</code></pre>
<p>De cette manière quelqu'un qui tape l'url de l'API vera une réponse en JSON et un développeur pourra faire une requête sur l'url pour accéder à ces données.</p>
<blockquote>
<p>Si jamais vous vous posez la question : une <strong>API</strong> c'est juste ça, donner la possibilité d'accéder à des données depuis l'extérieur.</p>
</blockquote>
<hr>
<h2 id="le-mvc">Le MVC</h2>
<p>L'idée du pattern MVC (model-view-controller) est de scinder les données, l'affichage et la logique d'un système.</p>
<ul>
<li>le <strong>modèle</strong> contient les données, ou c'<em>est</em> carrément les données.</li>
<li>la <strong>vue</strong> est l'interface utilisateur (l'IHM)</li>
<li>le <strong>controller</strong> est l'interface entre le modèle et la vue</li>
</ul>
<p>La vue n'est pas censée avoir connaissance du modèle et vice-versa.</p>
<p>Dans les faits c'est "simplement" de distinguer vos fichiers html (ou php) de pages web et vos fichiers php qui font les requêtes sql, modifient des fichiers etc...</p>
<p>Typiquement dans un projet en MVC on aura 3 dossiers principaux : <code>model</code>, <code>view</code> et <code>controller</code>. Avec un fichier html/php par page web dans <code>view</code> et <code>controller</code>.</p>
<blockquote>
<p><strong>Note</strong> <strong>Mon avis sur le MVC</strong></p>
<p>Personnellement, je n'aime pas du tout diviser mes fichiers de cette manière, ce que je fais souvent c'est de mettre tout mon code serveur (php) dans un dossier et tout le code client (html/js/css) dans un autre, et j'utilise js pour faire des requêtes sur mon code php plutôt que d'intégrer php directement (= je n'ai que des .html, pas de .php dans mon code client).
Vous êtes libre d'adapter le modèle à votre sauce, mais pour un premier projet c'est sans doute mieux de suivre le MVC à la lettre.</p>
</blockquote>
<hr>
<h2 id="js">JS</h2>
<p>Javascript est le langage principal qui permet de rendre une page intéractive (click sur un bouton, animations etc). Il faudrait un cours entier sur le langage pour pouvoir tout voir donc je vais mettre ~seulement le plus important ici.</p>
<blockquote>
<p>Techniquement vous n'avez pas besoin de JS du tout pour faire un site, mais ça se verra bien dans le résultat final.</p>
</blockquote>
<h3 id="syntaxe">Syntaxe</h3>
<ul>
<li>Les <code>;</code> de fin de ligne ne sont pas obligatoires mais vivement conseillés</li>
<li><code>let</code> ou <code>var</code> pour déclarer des variables (utilisez <code>let</code> par défaut).</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> a = <span class="hljs-number">4</span>;
<span class="hljs-comment">// boucle for classique</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &#x3C; <span class="hljs-number">3</span>; i++)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"i + 3 ="</span>, i+<span class="hljs-number">3</span>);

<span class="hljs-comment">// liste, les éléments ne sont pas forcément du même type</span>
<span class="hljs-keyword">let</span> array = [ a, <span class="hljs-number">4</span>, <span class="hljs-string">"foo"</span> ];
<span class="hljs-comment">// ajouter à une liste</span>
array.<span class="hljs-title function_">push</span>(<span class="hljs-number">43</span>);

<span class="hljs-comment">// les objets</span>
<span class="hljs-keyword">let</span> car = { <span class="hljs-attr">wheels</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">speed</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"a car"</span> };
<span class="hljs-comment">// un objet peut être indexé de ces manière</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car[<span class="hljs-string">'wheels'</span>], car.<span class="hljs-property">wheels</span>);

<span class="hljs-comment">// les textes peuvent être composés avec +</span>
<span class="hljs-keyword">let</span> str1 = <span class="hljs-string">"a "</span> + <span class="hljs-string">"text"</span>;
<span class="hljs-comment">// les ` permettent de formater avec des variables</span>
<span class="hljs-keyword">let</span> str2 = <span class="hljs-string">`<span class="hljs-subst">${str1}</span> with <span class="hljs-subst">${a}</span> words`</span>; <span class="hljs-comment">// a text with 4 words</span>
<span class="hljs-keyword">let</span> str4 = <span class="hljs-string">`the car has <span class="hljs-subst">${car.wheels}</span> wheels, or maybe <span class="hljs-subst">${car.wheels+<span class="hljs-number">3</span>}</span>`</span>; <span class="hljs-comment">// the car has 4 wheels, or maybe 7</span>

<span class="hljs-comment">// boucle foreach, avec les clés d'un objet</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> car) {
    <span class="hljs-keyword">let</span> value = car[key];
    ...
}
<span class="hljs-comment">// boucle foreach, sur un tableau</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> array) { ... }
</code></pre>
<p>Pour stocker des données le plus utilisé sont les <em>objets</em>. Ils peuvent contenir tout et n'importe quoi, ce sont comme des dictionaires/(hash)map dans d'autre langages.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> allNotes = {
    <span class="hljs-attr">avg</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">lessons</span>: [
        {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'maths'</span>,
            <span class="hljs-attr">notes</span>: [ <span class="hljs-number">8</span>, <span class="hljs-number">9</span> ]
        },
        {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'physics'</span>,
            <span class="hljs-attr">notes</span>: [ <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span> ]
        }
    ]
};

<span class="hljs-keyword">let</span> mathNotes = allNotes.<span class="hljs-property">lessons</span>[<span class="hljs-number">0</span>].<span class="hljs-property">notes</span>;
</code></pre>
<p>Vous avez peut-être déjà vu cette syntaxe, c'est (presque) le JSON. C'est beaucoup utilisé un peu partout, pour des fichiers de configurations par exemple.
Techniquement les retours à la ligne sont optionnels.</p>
<blockquote>
<p><strong>Warning</strong> <strong>Les types</strong></p>
<p>En JS, les variables n'ont pas de type, et souvent ca produit des bugs :</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> x = <span class="hljs-number">1</span>;
<span class="hljs-keyword">let</span> y = <span class="hljs-string">"10"</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x+y); <span class="hljs-comment">// "110"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x-y); <span class="hljs-comment">// -9</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x*y); <span class="hljs-comment">// 10</span>
</code></pre>
<p>Pour passer de <em>string</em> à <em>number</em> il y a <code>parseInt("5")</code> et <code>parseFloat(3.14)</code>.</p>
</blockquote>
<h3 id="interaction-avec-le-dom">Interaction avec le DOM</h3>
<blockquote>
<p>DOM = document object model, la page</p>
</blockquote>
<pre><code class="hljs language-html"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>></span>
    <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span>></span>Button<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"result"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"colored"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"colored"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"colored"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
</code></pre>
<p><strong>Récupérer les éléments du DOM :</strong></p>
<pre><code class="hljs language-js"><span class="hljs-comment">// par id</span>
<span class="hljs-keyword">let</span> resultDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"result"</span>);
<span class="hljs-comment">// par sélecteur css (sélectionne le premier)</span>
<span class="hljs-keyword">let</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".container"</span>);
<span class="hljs-keyword">let</span> textInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"input[type=text]"</span>);
<span class="hljs-comment">// par sélecteur css (renvoie un tableau avec tous les éléments)</span>
<span class="hljs-keyword">let</span> coloredElements = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">".colored"</span>);
<span class="hljs-comment">// par sélecteur css depuis un autre élément</span>
<span class="hljs-keyword">let</span> button = container.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"button"</span>);
</code></pre>
<p><strong>Interagir avec le css :</strong></p>
<pre><code class="hljs language-js"><span class="hljs-comment">// changer l'id (à éviter)</span>
button.<span class="hljs-property">id</span> = <span class="hljs-string">'new-id'</span>;
<span class="hljs-comment">// changer les classes</span>
button.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'new-class'</span>);
container.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'container'</span>);
<span class="hljs-comment">// modifier directement le css</span>
button.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">'red'</span>; <span class="hljs-comment">// ok pour 1 propriété</span>
button.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">'1px solid blue'</span>; <span class="hljs-comment">// à éviter, utilisez plutôt les classes</span>
<span class="hljs-comment">// cacher/afficher un élément</span>
button.<span class="hljs-property">hidden</span> = <span class="hljs-literal">true</span>;
button.<span class="hljs-property">hidden</span> = <span class="hljs-literal">false</span>;
</code></pre>
<p><strong>Interagir avec les forms :</strong></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> textValue = textInput.<span class="hljs-property">value</span>;
textInput.<span class="hljs-property">value</span> = <span class="hljs-string">'something else'</span>;
</code></pre>
<p><strong>Modifier directement les éléments du DOM :</strong></p>
<pre><code class="hljs language-js"><span class="hljs-comment">// remplacer le texte d'un élément</span>
resultDiv.<span class="hljs-property">innerText</span> = <span class="hljs-string">"New text"</span>;
<span class="hljs-comment">// remplacer toute la hiérarchie d'un élément (rarement utile)</span>
resultDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">"&#x3C;span style=\"background-color:red\">New span&#x3C;/span>"</span>;
<span class="hljs-comment">// ajouter un élément</span>
<span class="hljs-keyword">let</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
div.<span class="hljs-property">innerText</span> = <span class="hljs-string">"..."</span>;
resultDiv.<span class="hljs-title function_">appendChild</span>(div);
<span class="hljs-comment">// retirer complètement un élément</span>
resultDiv.<span class="hljs-title function_">remove</span>();
</code></pre>
<blockquote>
<p><strong>Warning</strong> <strong>L'ordre de chargement des scripts</strong></p>
<p>Les scripts sont chargés en même temps que le reste du DOM, si vous mettez votre balise <code>&#x3C;script></code> en haut du document vous ne pourrez pas utiliser <code>querySelector</code> ou <code>getElementById</code> puisque les éléments n'existent pas encore !
Si vous en avez besoin vous pouvez mettre votre code dans une fonction appelée au chargement de la page :</p>
<pre><code class="hljs language-js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =></span> <span class="hljs-title function_">initializeThings</span>());
</code></pre>
<p>Ou rajouter <code>defer</code> à la balise <code>&#x3C;script></code>, ce qui l'oblige à charger après le DOM.</p>
</blockquote>
<h4 id="les-events">Les events</h4>
<p>En web, Javascript fonctionne avec la <em>boucle événementielle</em>. Quand l'utilisateur clique un <em>event</em> est levé et JS peut l'intercepter pour y réagir :</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">triggerOnClick</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event); <span class="hljs-comment">// affiche l'événement</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// affiche l'élément qui reçoit l'événement</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">'red'</span>; <span class="hljs-comment">// par exemple</span>
}

button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, triggerOnClick);

<span class="hljs-comment">// même principe avec une lambda, cf la section lambda, plus bas</span>
button.<span class="hljs-title function_">addEvenetListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =></span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'clicked!'</span>));
</code></pre>
<p>Vous pouvez trouver une liste des évènements <a href="https://developer.mozilla.org/en-US/docs/Web/Events#event_listing">ici</a>. Les plus utiles sont <code>click</code>, <code>mousedown</code>, <code>mouseup</code>, <code>input</code> (quand un champ <code>&#x3C;input></code> est validé), <code>change</code> (quand un champ <code>&#x3C;input></code> est modifié).</p>
<h3 id="eléments-du-langage">Eléments du langage</h3>
<blockquote>
<p><strong>Note</strong> <strong>Les délais</strong></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">someFunction</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello, World!"</span>);
}

<span class="hljs-keyword">let</span> to = <span class="hljs-built_in">setTimeout</span>(someFunction, <span class="hljs-number">500</span>); <span class="hljs-comment">// execute someFunction 500ms plus tard</span>
<span class="hljs-keyword">let</span> it = <span class="hljs-built_in">setInterval</span>(someFunction, <span class="hljs-number">500</span>); <span class="hljs-comment">// execute someFunction toutes les 500ms</span>
<span class="hljs-comment">// optionnels</span>
<span class="hljs-built_in">clearTimeout</span>(to); <span class="hljs-comment">// stoppe le timeout s'il ne s'est pas déjà exécuté</span>
<span class="hljs-built_in">clearInterval</span>(it); <span class="hljs-comment">// stoppe l'exécution périodique</span>
</code></pre>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Les erreurs</strong></p>
<p>Les erreurs fonctionnent comme dans les autres langages classiques mais elles ne sont pas typées donc impossible de 'catch' un seul type d'erreur :</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &#x3C; <span class="hljs-number">.5</span>)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"50% error"</span>);
} <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Something went wrong: "</span>, e);
}
</code></pre>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Les constantes</strong></p>
<p>Par convention les noms des constantes sont en majuscule avec des underscores.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SOME_CONSTANT</span> = <span class="hljs-number">4</span>;
</code></pre>
</blockquote>
<h3 id="les-requêtes-en-js">Les requêtes en JS</h3>
<p>On peut envoyer des requêtes GET et POST depuis Javascript directement, ca permet de ne pas rafraichir la page pour afficher de nouvelles info :</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> url = <span class="hljs-string">'https://www.google.com'</span>;
<span class="hljs-keyword">let</span> params = <span class="hljs-string">''</span>;
<span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">'GET'</span>, url, <span class="hljs-literal">true</span>);
xhr.<span class="hljs-title function_">send</span>(params);
xhr.<span class="hljs-property">onload</span> = <span class="hljs-function">() =></span> {
    <span class="hljs-keyword">if</span>(xhr.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Response ="</span>, xhr.<span class="hljs-property">responseText</span>);
        <span class="hljs-comment">// do something with the data</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Could not fetch "</span>);
    }
};
</code></pre>
<p>Pour vérifier que vos requêtes sont bien envoyées aux bons endroits vous pouvez cocher <code>xhr</code> dans la console des devtools (pas <code>requêtes</code> !).</p>
<p>Souvent on passe par le format JSON pour échanger des données avec des requêtes. En JS on peut écrire :</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// let response = `{"a":3, "b":"c"}`;</span>
<span class="hljs-keyword">let</span> response = xhr.<span class="hljs-property">responseText</span>;
<span class="hljs-keyword">let</span> responseObject = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(response);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(responseObject);
</code></pre>
<p>Dans le cas ou on <em>reçoit</em> une requête au lieu de l'émettre, on peut récupérer les paramètres GET de cette manière :</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);
<span class="hljs-keyword">if</span>(params.<span class="hljs-title function_">has</span>(<span class="hljs-string">'someparam'</span>))
	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Parameter someparam="</span>, params.<span class="hljs-title function_">get</span>(<span class="hljs-string">'someparam'</span>));
<span class="hljs-comment">// ne pas oublier parseInt ou parseFloat si vos paramètres sont des nombres</span>
</code></pre>
<h3 id="les-twists-de-javascript">Les twists de Javascript</h3>
<blockquote>
<p>Passez cette section si c'est la première fois que vous utilisez JS</p>
</blockquote>
<p>Quand vous maitrisez un peu le langage il y a quelques opérateurs qui sont très sympa à utiliser :</p>
<blockquote>
<p><strong>Note</strong> <strong>Ternary operator</strong></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> a = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &#x3C; <span class="hljs-number">.5</span>;
<span class="hljs-keyword">let</span> b = a ? <span class="hljs-string">"machin"</span> : <span class="hljs-string">"truc"</span>;
<span class="hljs-comment">// b vaut "machin" 50% du temps et "truc" sinon</span>
</code></pre>
<p>Syntaxe <code>condition ? sivrai : sifaux</code>.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>?. operator</strong></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> obj1 = { <span class="hljs-attr">val</span>: <span class="hljs-number">2</span> };
<span class="hljs-keyword">let</span> obj2 = <span class="hljs-literal">undefined</span>;
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> obj <span class="hljs-keyword">of</span> [ obj1, obj2 ]) {
    <span class="hljs-keyword">let</span> val = obj?.<span class="hljs-property">val</span>;
    <span class="hljs-comment">// val vaut 2 pour obj1 et undefined pour obj2</span>
    <span class="hljs-comment">// si on avait écrit obj.val alors il y aurait</span>
    <span class="hljs-comment">// eu une erreur pour obj2</span>
}
</code></pre>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Les lambdas</strong></p>
<p>Des fonctions écrites plus simplement.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// écritures équivalentes</span>
<span class="hljs-comment">// fonction classique</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x</span>) { <span class="hljs-keyword">return</span> x*x; }
<span class="hljs-comment">// fonction comme valeur</span>
<span class="hljs-keyword">let</span> square = <span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) { <span class="hljs-keyword">return</span> x*x; }
<span class="hljs-comment">// lambda</span>
<span class="hljs-keyword">let</span> <span class="hljs-title function_">square</span> = (<span class="hljs-params">x</span>) => x*x;
<span class="hljs-comment">// parenthèses optionnelles s'il n'y a exactement 1 argument</span>
<span class="hljs-keyword">let</span> <span class="hljs-title function_">square</span> = x => x*x;
<span class="hljs-comment">// corps plus complexe</span>
<span class="hljs-keyword">let</span> <span class="hljs-title function_">square</span> = x => { <span class="hljs-keyword">return</span> x*x; }

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">square</span>(<span class="hljs-number">3</span>));

<span class="hljs-comment">// exemple classique</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =></span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"document loaded"</span>);
});
</code></pre>
<p>Attention à la différence entre <code>()=>{}</code> et <code>function(){}</code> avec <code>this</code> et les events. Dans le premier cas <code>this</code> ne correspond pas à l'élément qui reçoit l'événement !</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>L'unpacking</strong></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> someObject = { <span class="hljs-attr">var1</span>: <span class="hljs-number">32</span>, <span class="hljs-attr">var2</span>: <span class="hljs-literal">null</span> };
<span class="hljs-comment">// let var1 = someObject.var1, var2 = someObject.var2;</span>
<span class="hljs-keyword">let</span> { var1, var2 } = someObject; <span class="hljs-comment">// même sens, écriture condensée</span>

<span class="hljs-keyword">let</span> someArray = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> ];
<span class="hljs-keyword">let</span> x1 = someArray[<span class="hljs-number">0</span>], x2 = someArray[<span class="hljs-number">1</span>], x3 = someArray[<span class="hljs-number">2</span>];
<span class="hljs-keyword">let</span> [ x1, x2, x3 ] = someArray; <span class="hljs-comment">// même sens, écriture condensée</span>
</code></pre>
<p>On peut aussi se servire de l'unpacking dans des paramètres :</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">someFunction</span>(<span class="hljs-params">val, { var1, var2, var3 }</span>) { ... }

<span class="hljs-keyword">let</span> params = { <span class="hljs-attr">var1</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">var2</span>: <span class="hljs-number">54</span>, <span class="hljs-attr">var3</span>: <span class="hljs-number">6</span> };
<span class="hljs-title function_">someFunction</span>(<span class="hljs-number">54</span>, params);
</code></pre>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Les promise</strong></p>
<p>Pour le code asynchrone, c'est un peu trop compliqué pour que j'explique tout ici, je vous laisse chercher si ça vous intéresse.
Vous trouverez facilement avec les mots clés <code>Promise</code> <code>async</code> <code>await</code>.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sendRequest</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
    xhr.<span class="hljs-title function_">send</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =></span> {
        xhr.<span class="hljs-title function_">on</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =></span> {
            <span class="hljs-keyword">if</span>(xhr.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>)
                <span class="hljs-title function_">resolve</span>(xhr.<span class="hljs-property">response</span>);
            <span class="hljs-keyword">else</span>
                <span class="hljs-title function_">reject</span>(<span class="hljs-string">"Could not send request"</span>);
        });
    });
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendManyRequests</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">let</span> responses = [];
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &#x3C; <span class="hljs-number">30</span>; i++)
        responses.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">sendRequest</span>()); <span class="hljs-comment">// n'est pas bloqué en attente de la réponse</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(responses); <span class="hljs-comment">// attend que toutes les requêtes aient terminé</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> response <span class="hljs-keyword">of</span> responses) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response); <span class="hljs-comment">// on traite les résultats un à un</span>
    }
}
</code></pre>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Les templates</strong></p>
<p>Les balises <code>&#x3C;template></code> n'apparaissent pas dans la page web, elles existent pour être dupliquées en js et ajoutées à la page.</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&#x3C;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"article-list"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">ul</span>></span>

<span class="hljs-tag">&#x3C;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"article-item"</span>></span>
<span class="hljs-tag">&#x3C;<span class="hljs-name">li</span>></span>
    <span class="hljs-tag">&#x3C;<span class="hljs-name">h6</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"template-title"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">h6</span>></span>
    <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"template-body"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
<span class="hljs-tag">&#x3C;/<span class="hljs-name">li</span>></span>
<span class="hljs-tag">&#x3C;/<span class="hljs-name">template</span>></span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> articleItemTemplate = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"article-item"</span>);
<span class="hljs-keyword">const</span> articleList = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"article-list"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">addArticle</span>(<span class="hljs-params">title, body</span>) {
    <span class="hljs-keyword">let</span> node = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">importNode</span>(articleItemTemplate.<span class="hljs-property">content</span>, <span class="hljs-literal">true</span>).<span class="hljs-property">firstElementChild</span>;
    <span class="hljs-comment">// node est une copie de l'élément li</span>
    node.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"template-title"</span>) = title;
    node.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"template-body"</span>) = body;
    articleList.<span class="hljs-title function_">appendChild</span>(node);
}
</code></pre>
<p>Attention à ne pas utiliser d'ids dans les templates ! Sinon si vous importez leurs contenus deux fois vous aurez des ids dupliquées.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>L'opérateur ||</strong></p>
<p>En JS tout peut être converti en booléen (<code>null</code>-><code>false</code>, <code>""</code>-><code>false</code>, <code>"a"</code>-><code>true</code>, <code>0</code>-><code>false</code>, <code>-4</code>-><code>true</code>...) et l'opérateur <code>a||b</code> peut s'écrire <code>Boolean(a)?a:b</code>, ca permet d'écrire :</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);
<span class="hljs-keyword">let</span> key = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">'key'</span>) || <span class="hljs-string">"defaultKey"</span>;
</code></pre>
<p>De cette manière, si <code>params.get('key')</code> renvoie quelque chose, ce sera la valeur de <code>key</code>, sinon <code>key</code> vaudra <code>"defaultKey"</code>.</p>
</blockquote>
<hr>
<h2 id="notes-additionnelles">Notes additionnelles</h2>
<blockquote>
<p><strong>Note</strong> <strong>Le web en standalone</strong></p>
<p><a href="https://electronjs.org">Electron</a> permet de faire des applications sur mobile et en standalone sur tous les OS. Si vous cherchez à faire une application et que vous avez besoin d'une interface c'est une très bonne solution.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Debugging sur mobile</strong></p>
<p>Trouver des problèmes de css/js sur mobile est beaucoup plus compliqué que sur PC puisqu'il n'y a pas de console.
Il est possible de rattacher une console d'ordi à un process sur un mobile, c'est faisable mais pas toujours évident. Vous pouvez aussi utiliser un émulateur.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Le favicon</strong></p>
<p>Le favicon est l'icône qui apparaît à gauche du nom de l'onglet. Il vous suffit de générer un fichier en .ico et de le placer à la racine de votre site web. Vous pouvez utiliser <a href="https://favicon.io/">ce site</a> pour le générer.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> <strong>Accéder aux pages sans l'extension du fichier</strong></p>
<p>Si sur votre serveur vous avez un fichier <code>truc.html</code> (ou .php) à la racine, vous pouvez y accéder à <code>localhost/truc.html</code>. Mais pour éviter d'avoir à indiquer le .html on nomme le fichier <code>index.html</code> et on le met dans un dossier <code>truc</code>. L'arborescence d'un site ressemble souvent à ceci :</p>
<pre><code class="hljs language-bash">.
├── index.html/php
├── index.css,js...
├── favicon.ico
├── connexion/
│   ├── index.html/php
│   └── index.css,js...
├── page-perso/
│   ├── index.html/php
│   ├── index.css,js...
│   ├── editer-mon-compte/
│   │   ├── index.html/php
│   │   └── index.css,js...
│   └── ...
└── ...
</code></pre>
</blockquote>
<hr>
<h3 id="nodejs">NodeJS</h3>
<p><a href="https://nodejs.org">NodeJS</a> (ou node) est un moyen d'utiliser JS côté serveur, personnellement je préfère 100 fois utiliser node plutôt que php.</p>
<p>Node utilise le node packet manager (npm) pour installer des librairies, ça vous permet d'obtenir très facilement plein de librairies et d'accélérer le développement.</p>
<p>Pour démarrer je vous conseille d'installer node et <a href="https://expressjs.com/">express</a> (<code>npm install express</code>). Vous pourrez tester votre installation avec ce code :</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// --- main.js ---</span>

<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-comment">// create the web app (server)</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">urlencoded</span>({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> }));  
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(<span class="hljs-string">'public'</span>));
app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">80</span>, <span class="hljs-function">() =></span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Running on http://localhost"</span>));
</code></pre>
<p>Et vos autres fichiers devront être placés dans un dossier <code>public/</code> adjacent au <code>main.js</code>, ensuite vous pouvez démarrer votre serveur avec <code>node main.js</code>.</p>
<p>La documentation en ligne d'express est très bien faite, je vous laisse chercher pour la suite.</p>
<blockquote>
<p><strong>Note</strong> <strong>JS sans le web</strong></p>
<p>NodeJS peut aussi être utilisé pour vos projets qui n'utilisent pas le web !
Après tout, javascript est un langage très général - dans la même veine que python -, d'autant qu'on peut accéder aux fichiers avec node et avec le nombre de librairies qui existent on peut à peu près tout faire très rapidement.</p>
<blockquote>
<p>JS est mon langage de prédilection pour les proof-of-concepts et les projets rapides, je vous invite à en faire autant.</p>
</blockquote>
</blockquote>